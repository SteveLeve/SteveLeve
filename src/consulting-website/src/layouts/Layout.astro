---
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

export interface Props {
  title: string;
  description?: string;
  currentPage?: string;
}

const { 
  title, 
  description = "Consulting focused on troubleshooting, modernization, and pragmatic reliability under constraint.",
  currentPage = 'home'
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts - Material Symbols -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet">
    
    <title>{title}</title>
  </head>
  <body>
    <Header currentPage={currentPage} />
    <main class="main-content">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<style is:global>
  :root {
    --brand: #6750A4;
    --brand-ink: #21005D;
    --ink: #1F1B2D;
    --muted: #5E5873;
    --surface: #FFFFFF;
    --bg: #FAFAFE;
    --border: #EEEEEE;
    --radius: 18px;
    --gap: 1.25rem;
    --shadow: 0 10px 24px rgba(0, 0, 0, .06), 0 2px 6px rgba(0, 0, 0, .06);
    color-scheme: light;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --brand: #9C88FF;
      --brand-ink: #F5EEFF;
      --ink: #ECE6F0;
      --muted: #C9C1D4;
      --surface: #1E192B;
      --bg: #14101F;
      --border: #302A41;
      --shadow: 0 12px 28px rgba(0, 0, 0, .45), 0 4px 12px rgba(0, 0, 0, .35);
      color-scheme: dark;
    }
  }

  :root[data-theme="light"] {
    --brand: #6750A4;
    --brand-ink: #21005D;
    --ink: #1F1B2D;
    --muted: #5E5873;
    --surface: #FFFFFF;
    --bg: #FAFAFE;
    --border: #EEEEEE;
    --shadow: 0 10px 24px rgba(0, 0, 0, .06), 0 2px 6px rgba(0, 0, 0, .06);
    color-scheme: light;
  }

  :root[data-theme="dark"] {
    --brand: #9C88FF;
    --brand-ink: #F5EEFF;
    --ink: #ECE6F0;
    --muted: #C9C1D4;
    --surface: #1E192B;
    --bg: #14101F;
    --border: #302A41;
    --shadow: 0 12px 28px rgba(0, 0, 0, .45), 0 4px 12px rgba(0, 0, 0, .35);
    color-scheme: dark;
  }

  html {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--ink);
  }

  body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    background: var(--bg);
    color: var(--ink);
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .main-content {
    flex: 1;
    position: relative;
    z-index: 1;
  }

  /* Smooth transitions for theme changes */
  * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }

  /* Material Symbols font optimization */
  .material-symbols-outlined {
    font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24;
  }
</style>